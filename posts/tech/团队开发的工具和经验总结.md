---
layout: post
title: 团队开发的工具和经验总结
category: 技术
keywords: 总结
date: 2016-06-01
author: lisijie
---

## 项目管理：JIRA
用来做开发任务管理，版本管理。

使用流程大致为：

1. 需求方在JIRA录入任务到对应的项目中，然后指派给项目负责人安排开发。
2. 项目负责人将任务指派给组内的开发人员进行开发，如果任务太大，可以进行拆解为多个子任务分别指派给不同的开发人员协作开发，如前端、后端、测试。
3. 开发人员接到任务后，点击“开始进行”表示已经进行开发，可以在开发过程中记录开发状态。开发完成后点“已解决”。
4. 项目负责人将周期内已经开发完成的任务安排发版，版本发布后，将已经发版的任务标记上版本号。便于以后查看发版历史。
5. 已发布后，需求方再进行“关闭问题”。

**如何命名版本号？**

对于较大的项目，可以采用3个数字表示大版本号、小版本号、修复版本号。如 v1.2.3 表示如下：

- 1 为大版本，为项目的一个大的里程碑。
- 2 为小版本，每个发版周期+1，小版本发布后，修复版本改为0，如 v1.2.3 的下一个小版本为 v1.3.0。
- 3 为修复版本，小版本发布后，如果出现bug需要修复，则发布后修复版本号+1。

另一种表示法是，大版本号表示项目开始的年份，小版本号表示在当年的第几周发布的版本，修复版本号同上。这样做的好处是，可以从发布记录中看出各个周期发布了多少个版本。不足之处是版本号会出现跳跃可能让人产生误解。

## 版本控制软件：SVN/Git/GitLab
根据个人的使用经验，SVN适合用来做产品需求文档的版本控制，因为使用简单，产品经理容易掌握；而Git+GitLab是做代码版本控制最佳的选择。

基于Git+GitLab的开发流程如下：

- 代码使用git + gitlab 管理，基于git flow工作流，有master、develop两条永恒分支，master分支代码跟线上一致，develop为开发分支。
- 开发人员拿到开发任务后，从develop分支开出一条特性分支，使用规范的命名方式命名为：feature_任务ID_任务英文名称。

- 开发人员在自己的分支上进行开发，开发完成后进行自测。
- 自测通过后，在gitlab上发起合并到develop分支的请求，进行提测申请，代码审查人员进行审查，审查通过后打上“提测-前端通过”、“提测-后端通过”、“可提测”等标签，再把合并请求转给对应测试人员。
- 测试人员拿到提测需求后，在本地测试机checkout出对应分支进行测试，测试过程中发现问题及时与开发人员沟通，可通过bugfree提进行bug管理。
- 测试通过后在gitlab上对合并请求打上“测试通过”标签，再转给代码审查人员进行二审，审查完成后打上“终审-前端通过”、“终审-后端通过”、“可发版”等标签，再转给版本管理员。
- 达到封版时间后，由版本管理员对下一个版本要上线的多个合并请求合并到develop，并开出release分支，分支名为 rel_x.x.x，然后通知测试人员进行集成测试，测试过程中如果有BUG，开发人员直接在release分支进行修复。
- 全部测试通过后，打上tag，然后进行发版。
- 发版完成后，把release分支合并回develop和master分支。

## 接口文档管理工具：RAP
RAP是一个很好用开源接口文档管理工具，项目地址为：[https://github.com/thx/RAP]()。在项目中，我用他来管理Java服务提供给PHP调用的接口定义。或者是给手机端调用的JSON API定义。开发流程是先定义接口文档，再进行接口开发，开发过程中有变动再修改接口文档。

## 版本发布系统：GoPub
版本发布一般由测试人员去发，发版流程越简单越好，最好能有可视化界面。GoPub是本人开发的一个版本发布系统，基于Git的tag进行发布，用于发布PHP等脚本语言开发的项目，可以在web界面中实现一键发布。 项目地址：[https://github.com/lisijie/gopub]()

版本的发布流程如下：

- 项目管理员在git中对即将发布的版本打上tag，tag名即为版本好，如 v1.0.2。
- 发版人员登录gopub创建发布单。
- 对于比较重要的项目，发版前需要相关人员进行审批。
- 审批通过后，即可发布。一般是先发布到预发布环境，检查没问题再发布到线上环境。

## 定时任务管理工具：webcron
webcron是一个定时任务管理器，用于统一管理项目中的定时任务，提供可视化配置界面、执行日志记录、邮件通知等功能，无需依赖linux下的crontab服务。

开发此项目是为了解决PHP项目中定时任务繁多，使用crontab不好管理的问题。我所在项目的定时任务也是PHP编写的，属于整个项目的一部分，我希望能有一个系统可以统一配置这些定时任务，并且可以查看每次任务的执行情况，任务执行完成或失败能够自动邮件提醒开发人员，因此做了这个项目。
项目地址：[https://github.com/lisijie/webcron]()

## 开发文档编写：Markdown
Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。可以转换成格式统一的html，并且在GitLab、GitHub中直接支持显示为html。建议所有开发文档都使用markdown格式编写，并且在每个项目中应当带有一个名为README.md的说明文档。

Windows下比较好的markdown编写工具有：`MarkdownPad`。Mac系统下可以使用：`Mou`、`MacDown`。在线的markdown编辑器可以使用 [http://mahua.jser.me]()  或  [https://www.zybuluo.com/mdeditor]()
